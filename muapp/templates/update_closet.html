{% extends "base.html" %}
{% load static %}
{% block style %}
    <link href="{% static 'css/upload.css' %}" rel="stylesheet">
    <link href="https://releases.transloadit.com/uppy/v3.6.1/uppy.min.css" rel="stylesheet">


{% endblock style %}
{% block nav %}
    <a href="{% url 'index' %}" class="nav-item nav-link jamsil">Home</a>
    <a href="{% url 'index' %}" class="nav-item nav-link jamsil">Í∞ÄÏÉÅ ÌîºÌåÖ</a>
    <a href="{% url 'about' %}" class="nav-item nav-link jamsil">ÏÜåÍ∞ú</a>
{% endblock %}

{% block content %}
    <!-- Page Header Start -->
    <div class="container-xxl py-5">
        <!-- Page Header Start -->
        <div class="container">
            <div class="col-lg-6">
                <div class="section-header text-start mb-5 wow fadeInUp" style="bottom: 50px;top: 100px;" data-wow-delay="0.1s">
                    <h1 class="display-5 mb-3 jamsil" style="font-size: 4vw">ÎÇòÎßåÏùò Ïò∑Ïû•</h1>
                    <p class="jamsil">üëö Ïò∑ÏùÑ Îì±Î°ùÌï¥ÏÑú ÎÇòÎßåÏùò Ïò∑Ïû•ÏùÑ ÎßåÎì§Ïñ¥Ïöî.</p>
    
                 </div>
            </div>
        </div>
    </div>
    <!-- Page Header End -->
    <!-- Product Start -->
    <div class="container-xxl py-5">
        <div class="container">
            <div class="col text-start text-lg-end wow fadeInUp" data-wow-delay="0.1s">
                <a class="btn btn-lg btn-outline-primary border-2 jamsil" href="{% url 'view_closet' user.first_name %}">Î™©Î°ù</a>
            </div>
            <div class="row g-0 gx-5 align-items-end pt-3">
                <div class="col-lg-6">
                    <div class="section-header text-start mb-5 wow fadeInUp"
                         data-wow-delay="0.1s"
                         style="max-width: 500px">
                        <h1 class="display-5 mb-3 jamsil">Ïò∑Ïû• ÏóÖÎç∞Ïù¥Ìä∏</h1>
                    </div>
                </div>
            </div>
            <div class="tab-content jamsil wow fadeInUp" data-wow-delay="0.1s">
                <div id="tab-1" class="tab-pane fade show p-0 active">
                    <div class="row g-4">
                        <div>
                            <div id="att_zone" data-placeholder="">
                                <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.1s"></div>
                            </div>
                        </div>
                        <div>
                            <form action=""
                                  method="POST"
                                  name="clothesInfo"
                                  id="clothesInfo"
                                  enctype="multipart/form-data"
                                  >
                                {% csrf_token %}
                                <div class="mb-3 row">
                                    <label for="type1" class="col-sm-2 col-form-label text-end fw-bold">Î∂ÑÎ•ò 1</label>
                                    <select name="type1" id="type1" size="1" class="form-select col" required>
                                        <option value="none" disabled>=== Î∂ÑÎ•ò 1 ===</option>
                                        <option>ÏÉÅÏùò</option>
                                        <option>ÌïòÏùò</option>
                                        <option>ÏπòÎßà</option>
                                        <option>ÏõêÌîºÏä§</option>
                                        <option>ÏïÑÏö∞ÌÑ∞</option>
                                        <option>Í∞ÄÎ∞©</option>
                                        <option>ÏïÖÏÑ∏ÏÑúÎ¶¨</option>
                                        <option>Ïã†Î∞ú</option>
                                    </select>
                                </div>
                                <div class="mb-3 row">
                                    <label for="type2" class="col-sm-2 col-form-label text-end fw-bold">Î∂ÑÎ•ò 2</label>
                                    <select name="type2" id="type2" size="1" class="form-select col" required>
                                        <option value="none" disabled selected>=== Î∂ÑÎ•ò 2 ===</option>
                                    </select>
                                </div>
                                <div class="mb-3 row">
                                    <label for="name" class="col-sm-2 col-form-label text-end fw-bold">Ïò∑ Ïù¥Î¶Ñ</label>
                                    <input type="text" name="clothesName" id="clothesName"class="form-control col" placeholder="(ÌïÑÏàò ÏûÖÎ†•)" value="{{clothesobject.name}}" required/>
                                </div>
                                <!-- tag -->
                                <div class="mb-3 row">
                                    <label for="tag" class="col-sm-2 col-form-label text-end fw-bold">ÌÉúÍ∑∏</label>
                                    <input type="text" name="tag" id="tag" class="form-control col" 
                                           placeholder="#Íæ∏ÏïàÍæ∏ #Ï∂úÍ∑ºÎ£© #Í∞ÄÏ£Ω #Ïä§Ïõ®Ïù¥Îìú (ÌäπÏàòÎ¨∏ÏûêüôÖ‚Äç‚ôÄÔ∏è)"/>
                                    <button type="button" id="btn_addtag" class="btn_addtag col-sm-2" style="border:none" >Ï∂îÍ∞Ä</button>
                                </div>
                                <div class="mb-3 row">
                                    <label class="col-sm-2 col-form-label text-end"></label>
                                    <div class="col tag_area">
                                        
                                    </div>
                                </div>
                                <!--tag Ï∂îÍ∞ÄÌï¥ÏÑú ÎùÑÏö∞Îäî label-->
                                <div class="mb-3 row" >
                                    <label class="col-sm-2 col-form-label text-end"></label>
                                    <input type="text" name="tags" id="tags" class="form-control col" value="{{clothesobject.tag}}" readonly/>
                                </div>
                                <div class="mb-3 row">
                                    <label for="details" class="col-sm-2 col-form-label text-end fw-bold" >ÏÉÅÏÑ∏Ï†ïÎ≥¥</label>
                                    <textarea name="details" id="details" class="form-control col details" rows="5" placeholder="ÏÉùÎûµ Í∞ÄÎä•" >{{clothesobject.details}}</textarea>
                                </div>
                                <!-- hidden  -->
                                <input hidden id="groupID" type="text" value="{{clothesobject.groupID}}"></input>
                                <div class="mb-3 row">
                                    <label for="details" class="col-sm-2 col-form-label text-end fw-bold" >ÏóÖÎ°úÎìú ÏÇ¨ÏßÑ</label>
                                    <div class="container col">
                                        <div class="row row-cols-4">
                                            {% for p in photosobject %}
                                                <div class="col">
                                                    <img class="img-fluid w-100" src="{{p.imgfile.url}}" width="200px" height="300px" margin="10%" padding="10%" alt="">
                                                </div>
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>
                                
                                <br>
                                <!-- Uppy Dashboard -->
                                <div class="mb-3 row">
                                    <label class="col-sm-2"></label>
                                    <div class="fileUploadContent col"></div>
                                </div>
                                <!-- button design -->
                                <div class="btn-container" name="btn-container">
                                    <button id="btn-submit" class="btn-submit">
                                        <p class="jamsil" id="btnText" style="padding-top: 15px;">Ï†ÄÏû•</p>
                                        <div class="check-box">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50">
                                                <path fill="transparent" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
                                            </svg>
                                        </div>
                                    </button>
                                </div>
                            </form>
                        
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
{% endblock content %}
<!-- Product End -->

{% block jsv %}
{% comment %} <script defer src="{% static 'js/update_closet.js' %}"></script> {% endcomment %}
<script defer src="https://releases.transloadit.com/uppy/v3.6.1/uppy.min.js"></script>
<script defer src="https://releases.transloadit.com/uppy/locales/v3.0.7/ko_KR.min.js"></script>
<script type="module">
    // import {Uppy, Dashboard, DropTarget, Compressor, XHRUpload, ImageEditor} from "https://releases.transloadit.com/uppy/v3.6.1/uppy.min.mjs"
    //const COMPANION_URL = "http://companion.uppy.io"
    // const COMPANION_ALLOWED_HOSTS = ['https://my-site.com']
    // const COMPANION_URL = '{% url 'uploadCloset' user.username %}'
    //const COMPANION_ALLOWED_HOSTS = ['http://127.0.0.1:8000/']
    
    var uppy = new Uppy.Uppy({ logger: Uppy.debugLogger ,
                                meta: {
                                    type1: type1,
                                    type2: type2,
                                    tag: tag,
                                    name: clothesName,
                                    details: details,
                                    groupID: groupID,
                                },
                                locale : Uppy.locales.ko_KR,
    })
        // The main UI that shows files, progress and holds all plugins
        .use(Uppy.Dashboard, {
            id: 'Dashboard',
            target: '.fileUploadContent',
            inline: true,
            height: 800,
            width: 1000,
            metaFields: [ //Ïù¥ÎØ∏ÏßÄ ÏàòÏ†ïÏö© metaFields
                { id: 'name', name: 'Name', placeholder: 'file name' },
                { id: 'caption', name: 'Caption', placeholder: 'add description' },
            ],
            note: 'Images only, Up to 10 files',
            produlyDisplayPoweredByUppy:false,
            autoOpenFileEditor: false,
            hideUploadButton : true,
            hideProgressAfterFinish : true,
        })

        .use(Uppy.Form, { 
                        target: '#clothesInfo',
                        getMetaFromForm: true,
                        addResultToForm: true,
                        //triggerUploadOnSubmit: true, //UppyÍ∞Ä ÏóÖÎ°úÎìú/Ïù∏ÏΩîÎî©ÏùÑ ÏôÑÎ£åÌïú ÌõÑ ÏñëÏãùÏùÑ Ï†úÏ∂úÌï†ÏßÄ Ïó¨Î∂ÄÎ•º Íµ¨ÏÑ±Ìï©ÎãàÎã§(Î∂ÄÏö∏, Í∏∞Î≥∏Í∞í: false).
                        //submitOnSuccess: true, //Î™®Îì† ÌååÏùºÏù¥ ÏóÖÎ°úÎìúÎêú ÌõÑ ÏñëÏãùÏùÑ Ïã§Ï†úÎ°ú Ï†úÏ∂úÌï¥Ïïº ÌïòÎäî Í≤ΩÏö∞
                        resultName: 'FormInfo', //<input type="hidden">Ïùò ÏöîÏÜåÏùò Ïù¥Î¶Ñ (string, default: uppyResult).
                      })
        
        // Allow dropping files on any element or the whole document
        .use(Uppy.DropTarget, { target: document.body })
        // Optimize images
        .use(Uppy.Compressor)
        // Upload
        .use(Uppy.XHRUpload,{
            endpoint: "{% url 'uploadCloset' user.first_name %}",
            headers: {'X-CSRFToken':"{{csrf_token}}"},
            formData: true,
            fileData: true,
            fieldName:'imgfile',
            allowedMetaFields:true,
        })

        .use(Uppy.ImageEditor, { target: Uppy.Dashboard })
        
        

        // All remote services like Instagram and Google Drive in one package
        /*
        .use(Uppy.RemoteSources, {
            // You can manually specify `sources` here, by default all available are included. 
            // See docs: https://uppy.io/docs/remote-sources/#sources.
            companionUrl: COMPANION_URL,
            companionAllowedHosts: COMPANION_ALLOWED_HOSTS,
            sources: ['Instagram', 'GoogleDrive', 'Facebook', 'OneDrive', 'Url'],
        })
        .use(Uppy.Webcam, { target: Uppy.Dashboard })
        */
  

    uppy.upload().then((result) => {
        console.info('Successful uploads:', result.successful);
    
        if (result.failed.length > 0) {
            console.error('Errors:');
            result.failed.forEach((file) => {
                console.error(file.error);
            });
        }
    });
        
    document.getElementById('clothesInfo').addEventListener('keydown', function(event) {
        if (event.keyCode === 13) {
            event.preventDefault(); // Enter ÌÇ§ Ïù¥Î≤§Ìä∏ Í∏∞Î≥∏ ÎèôÏûë Ï§ëÏßÄ
        }
    });
    
    document.getElementById('btn-submit').addEventListener('click', () => {
        validationData();
        
        if(validationData_value){
            uppy.upload();
            document.getElementById('btn-submit').hidden=true;
        }
        
        setTimeout(function() {
            my_form.submit();
            }, 3000);
            return false;
    }); 


    document.getElementById("clothesInfo").onsubmit = function() {
        return false;
    }
    // ===== form Ïú†Ìö®ÏÑ± ÌÖåÏä§Ìä∏ =====
    var validationData_value = false;
    var submitform = document.getElementById("clothesInfo"); // formÏùÑ sumitform Î≥ÄÏàòÏóê Ï†ÄÏû•

    function validationData(){
        const files = uppy.getFiles();
        if($('#type1').val() == "" || $('#type1').val() == "none" || $('#type1').val() == null){ // input formÏù¥ ÎπÑÏñ¥ÏûàÏúºÎ©¥
            alert("Î∂ÑÎ•ò1ÏùÑ ÏÑ†ÌÉùÌïòÏßÄ ÏïäÏïòÏäµÎãàÎã§."); 
            validationData_value= false;
        }else if($('#type2').val() == "" || $('#type2').val() == "none" || $('#type2').val() == null){ // input formÏù¥ ÎπÑÏñ¥ÏûàÏúºÎ©¥
            alert("Î∂ÑÎ•ò2ÏùÑ ÏÑ†ÌÉùÌïòÏßÄ ÏïäÏïòÏäµÎãàÎã§."); 
            validationData_value= false;
        }else if($('#clothesName').val() == "" || $('#clothesName').val() == "none" || $('#clothesName').val() == null){ // input formÏù¥ ÎπÑÏñ¥ÏûàÏúºÎ©¥
            alert("Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏßÄ ÏïäÏïòÏäµÎãàÎã§."); 
            validationData_value= false;
        }else{ // ÏÇ¨ÏßÑÏù¥ ÏûàÏúºÎ©¥?
            alert("ÏàòÏ†ï ÏôÑÎ£å!")
            validationData_value= true;
            setTimeout(function() {
                submitform.submit();
                }, 1500);
        }
    }
</script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    function getType(){
        var mainCategory = {
            "ÏÉÅÏùò" : ["=== Î∂ÑÎ•ò 2 ===","ÎãàÌä∏/Ïä§Ïõ®ÌÑ∞","ÏÖîÏ∏†/Î∏îÎùºÏö∞Ïä§","ÌõÑÎìú Ìã∞ÏÖîÏ∏†", "ÌîºÏºÄ/Ïπ¥Îùº Ìã∞ÏÖîÏ∏†","Îß®Ìà¨Îß®/Ïä§Ïõ®Ìä∏ÏÖîÏ∏†", "Î∞òÏÜåÎß§ Ìã∞ÏÖîÏ∏†","Í∏¥ÏÜåÎß§ Ìã∞ÏÖîÏ∏†","ÎØºÏÜåÎß§ Ìã∞ÏÖîÏ∏†","Í∏∞ÌÉÄ ÏÉÅÏùò"],
            "ÌïòÏùò" : ["=== Î∂ÑÎ•ò 2 ===","Îç∞Îãò Ìå¨Ï∏†","Ïàè Ìå¨Ï∏†","ÏΩîÌäº Ìå¨Ï∏†", "Î†àÍπÖÏä§","ÏäàÌä∏ Ìå¨Ï∏†/Ïä¨ÎûôÏä§","Ï†êÌîÑ ÏäàÌä∏/Ïò§Î≤ÑÏò¨","Ìä∏Î†àÏù¥Îãù/Ï°∞Í±∞ Ìå¨Ï∏†","Í∏∞ÌÉÄ Î∞îÏßÄ"],
            "ÏπòÎßà" : ["=== Î∂ÑÎ•ò 2 ===","ÎØ∏Îãà Ïä§Ïª§Ìä∏", "ÎØ∏Îîî Ïä§Ïª§Ìä∏","Î°± Ïä§Ïª§Ìä∏"],
            "ÏõêÌîºÏä§" : ["=== Î∂ÑÎ•ò 2 ===","ÎØ∏Îãà ÏõêÌîºÏä§", "ÎØ∏Îîî ÏõêÌîºÏä§","Îß•Ïãú ÏõêÌîºÏä§"],
            "ÏïÑÏö∞ÌÑ∞" : ["=== Î∂ÑÎ•ò 2 ===","ÌõÑÎìú ÏßëÏóÖ","ÌôòÏ†àÍ∏∞ ÏΩîÌä∏", "Î∏îÎ£®Ï¢Ö/MA-1","Í≤®Ïö∏ ÏΩîÌä∏", "Î†àÎçî/ÎùºÏù¥ÎçîÏä§ Ïû¨ÌÇ∑","Î¨¥Ïä§ÌÉï/Ìçº","Î°±Ìå®Îî©/Î°±Ìó§ÎπÑ ÏïÑÏö∞ÌÑ∞","ÏäàÌä∏/Î∏îÎ†àÏù¥Ï†Ä Ïû¨ÌÇ∑","ÏàèÌå®Îî©/ÏàèÌó§ÎπÑ ÏïÑÏö∞ÌÑ∞","Ïπ¥ÎîîÍ±¥","ÏïÑÎÖ∏ÎùΩ Ïû¨ÌÇ∑","Ìå®Îî© Î≤†Ïä§Ìä∏","ÌîåÎ¶¨Ïä§/ÎΩÄÍ∏ÄÏù¥","Ìä∏Î†àÏù¥Îãù Ïû¨ÌÇ∑","Í∏∞ÌÉÄ ÏïÑÏö∞ÌÑ∞"],
            "Í∞ÄÎ∞©" : ["=== Î∂ÑÎ•ò 2 ===","Î∞±Ìå©","Î©îÏã†Ï†Ä/ÌÅ¨Î°úÏä§ Î∞±","ÌååÏö∞Ïπò Î∞±","ÏàÑÎçîÎ∞±","ÏóêÏΩîÎ∞±","ÌÜ†Ìä∏Î∞±","ÌÅ¥Î°úÏπò Î∞±","Ïõ®Ïù¥Ïä§Ìä∏Î∞±/ÌûôÏÉâ"],
            "ÏïÖÏÑ∏ÏÑúÎ¶¨" : ["=== Î∂ÑÎ•ò 2 ===","Î™®Ïûê","Î†àÍ∑∏Ïõ®Ïñ¥","Î®∏ÌîåÎü¨","Ïû•Í∞ë","ÏãúÍ≥Ñ","ÌåîÏ∞å","Í∑ÄÍ±∏Ïù¥","Î∞òÏßÄ","Î∞úÏ∞å","Î™©Í±∏Ïù¥","Ìó§Ïñ¥ Ïï°ÏÑ∏ÏÑúÎ¶¨"],
            "Ïã†Î∞ú" : ["=== Î∂ÑÎ•ò 2 ===","Íµ¨Îëê","ÏÉåÎì§","Î°úÌçº","Ìûê/ÌéåÌîÑÏä§","ÌîåÎû´ ÏäàÏ¶à","Î∂ÄÏ∏†","Ï∫îÎ≤ÑÏä§/Îã®Ìôî","Ïä§Ìè¨Ï∏† Ïä§ÎãàÏª§Ï¶à"],
        }

        var top = ["=== Î∂ÑÎ•ò 2 ===","ÎãàÌä∏/Ïä§Ïõ®ÌÑ∞","ÏÖîÏ∏†/Î∏îÎùºÏö∞Ïä§","ÌõÑÎìú Ìã∞ÏÖîÏ∏†", "ÌîºÏºÄ/Ïπ¥Îùº Ìã∞ÏÖîÏ∏†","Îß®Ìà¨Îß®/Ïä§Ïõ®Ìä∏ÏÖîÏ∏†", "Î∞òÏÜåÎß§ Ìã∞ÏÖîÏ∏†","Í∏¥ÏÜåÎß§ Ìã∞ÏÖîÏ∏†","ÎØºÏÜåÎß§ Ìã∞ÏÖîÏ∏†","Í∏∞ÌÉÄ ÏÉÅÏùò"];
        var pants = ["=== Î∂ÑÎ•ò 2 ===","Îç∞Îãò Ìå¨Ï∏†","Ïàè Ìå¨Ï∏†","ÏΩîÌäº Ìå¨Ï∏†", "Î†àÍπÖÏä§","ÏäàÌä∏ Ìå¨Ï∏†/Ïä¨ÎûôÏä§","Ï†êÌîÑ ÏäàÌä∏/Ïò§Î≤ÑÏò¨","Ìä∏Î†àÏù¥Îãù/Ï°∞Í±∞ Ìå¨Ï∏†","Í∏∞ÌÉÄ Î∞îÏßÄ"];
        var skirt = ["=== Î∂ÑÎ•ò 2 ===","ÎØ∏Îãà Ïä§Ïª§Ìä∏", "ÎØ∏Îîî Ïä§Ïª§Ìä∏","Î°± Ïä§Ïª§Ìä∏"];
        var dress = ["=== Î∂ÑÎ•ò 2 ===","ÎØ∏Îãà ÏõêÌîºÏä§", "ÎØ∏Îîî ÏõêÌîºÏä§","Îß•Ïãú ÏõêÌîºÏä§"];
        var outer = ["=== Î∂ÑÎ•ò 2 ===","ÌõÑÎìú ÏßëÏóÖ","ÌôòÏ†àÍ∏∞ ÏΩîÌä∏", "Î∏îÎ£®Ï¢Ö/MA-1","Í≤®Ïö∏ ÏΩîÌä∏", "Î†àÎçî/ÎùºÏù¥ÎçîÏä§ Ïû¨ÌÇ∑","Î¨¥Ïä§ÌÉï/Ìçº","Î°±Ìå®Îî©/Î°±Ìó§ÎπÑ ÏïÑÏö∞ÌÑ∞","ÏäàÌä∏/Î∏îÎ†àÏù¥Ï†Ä Ïû¨ÌÇ∑","ÏàèÌå®Îî©/ÏàèÌó§ÎπÑ ÏïÑÏö∞ÌÑ∞","Ïπ¥ÎîîÍ±¥","ÏïÑÎÖ∏ÎùΩ Ïû¨ÌÇ∑","Ìå®Îî© Î≤†Ïä§Ìä∏","ÌîåÎ¶¨Ïä§/ÎΩÄÍ∏ÄÏù¥","Ìä∏Î†àÏù¥Îãù Ïû¨ÌÇ∑","Í∏∞ÌÉÄ ÏïÑÏö∞ÌÑ∞"];
        var bag = ["=== Î∂ÑÎ•ò 2 ===","Î∞±Ìå©","Î©îÏã†Ï†Ä/ÌÅ¨Î°úÏä§ Î∞±","ÌååÏö∞Ïπò Î∞±","ÏàÑÎçîÎ∞±","ÏóêÏΩîÎ∞±","ÌÜ†Ìä∏Î∞±","ÌÅ¥Î°úÏπò Î∞±","Ïõ®Ïù¥Ïä§Ìä∏Î∞±/ÌûôÏÉâ"];
        var accessary = ["=== Î∂ÑÎ•ò 2 ===","Î™®Ïûê","Î†àÍ∑∏Ïõ®Ïñ¥","Î®∏ÌîåÎü¨","Ïû•Í∞ë","ÏãúÍ≥Ñ","ÌåîÏ∞å","Í∑ÄÍ±∏Ïù¥","Î∞òÏßÄ","Î∞úÏ∞å","Î™©Í±∏Ïù¥","Ìó§Ïñ¥ Ïï°ÏÑ∏ÏÑúÎ¶¨"];
        var shoes = ["=== Î∂ÑÎ•ò 2 ===","Íµ¨Îëê","ÏÉåÎì§","Î°úÌçº","Ìûê/ÌéåÌîÑÏä§","ÌîåÎû´ ÏäàÏ¶à","Î∂ÄÏ∏†","Ï∫îÎ≤ÑÏä§/Îã®Ìôî","Ïä§Ìè¨Ï∏† Ïä§ÎãàÏª§Ï¶à"];
    
        var selectedMain = "{{clothesobject.type1}}";
        var selectedsub = "{{clothesobject.type2}}"
        var changeItem = top;

        console.log("main ",selectedMain,"/ sub",selectedsub);

        if(selectedMain == "ÏÉÅÏùò"){
            changeItem = top;
            document.getElementById("type1").options[1].selected=true;
        }
        else if(selectedMain == "ÌïòÏùò"){
            changeItem = pants;
            document.getElementById("type1").options[2].selected=true;
        }
        else if(selectedMain == "ÏπòÎßà"){
            changeItem =  skirt;
            document.getElementById("type1").options[3].selected=true;
        }
        else if(selectedMain == "ÏõêÌîºÏä§"){
            changeItem = dress;
            document.getElementById("type1").options[4].selected=true;
        }
        else if(selectedMain == "ÏïÑÏö∞ÌÑ∞"){
            changeItem = outer;
            document.getElementById("type1").options[5].selected=true;
        }
        else if(selectedMain == "Í∞ÄÎ∞©"){
            changeItem = bag;
            document.getElementById("type1").options[6].selected=true;
        }
        else if(selectedMain == "ÏïÖÏÑ∏ÏÑúÎ¶¨"){
            changeItem = accessary;
            document.getElementById("type1").options[7].selected=true;
        }
        else if(selectedMain == "Ïã†Î∞ú"){
            changeItem = shoes;
            document.getElementById("type1").options[8].selected=true;
        }
        
        $('#type2').empty();
        
        for(var count = 0; count < changeItem.length; count++){                
                        var option = $("<option>"+changeItem[count]+"</option>");
                        $('#type2').append(option);
                    }

        
        for(var count = 1; count < changeItem.length; count++){                
            if (selectedsub == changeItem[count]){
                document.getElementById("type2").options[count].selected=true;
            }
        }
        
    }

    function subChange(){

        var mainCategory = {
            "ÏÉÅÏùò" : ["=== Î∂ÑÎ•ò 2 ===","ÎãàÌä∏/Ïä§Ïõ®ÌÑ∞","ÏÖîÏ∏†/Î∏îÎùºÏö∞Ïä§","ÌõÑÎìú Ìã∞ÏÖîÏ∏†", "ÌîºÏºÄ/Ïπ¥Îùº Ìã∞ÏÖîÏ∏†","Îß®Ìà¨Îß®/Ïä§Ïõ®Ìä∏ÏÖîÏ∏†", "Î∞òÏÜåÎß§ Ìã∞ÏÖîÏ∏†","Í∏¥ÏÜåÎß§ Ìã∞ÏÖîÏ∏†","ÎØºÏÜåÎß§ Ìã∞ÏÖîÏ∏†","Í∏∞ÌÉÄ ÏÉÅÏùò"],
            "ÌïòÏùò" : ["=== Î∂ÑÎ•ò 2 ===","Îç∞Îãò Ìå¨Ï∏†","Ïàè Ìå¨Ï∏†","ÏΩîÌäº Ìå¨Ï∏†", "Î†àÍπÖÏä§","ÏäàÌä∏ Ìå¨Ï∏†/Ïä¨ÎûôÏä§","Ï†êÌîÑ ÏäàÌä∏/Ïò§Î≤ÑÏò¨","Ìä∏Î†àÏù¥Îãù/Ï°∞Í±∞ Ìå¨Ï∏†","Í∏∞ÌÉÄ Î∞îÏßÄ"],
            "ÏπòÎßà" : ["=== Î∂ÑÎ•ò 2 ===","ÎØ∏Îãà Ïä§Ïª§Ìä∏", "ÎØ∏Îîî Ïä§Ïª§Ìä∏","Î°± Ïä§Ïª§Ìä∏"],
            "ÏõêÌîºÏä§" : ["=== Î∂ÑÎ•ò 2 ===","ÎØ∏Îãà ÏõêÌîºÏä§", "ÎØ∏Îîî ÏõêÌîºÏä§","Îß•Ïãú ÏõêÌîºÏä§"],
            "ÏïÑÏö∞ÌÑ∞" : ["=== Î∂ÑÎ•ò 2 ===","ÌõÑÎìú ÏßëÏóÖ","ÌôòÏ†àÍ∏∞ ÏΩîÌä∏", "Î∏îÎ£®Ï¢Ö/MA-1","Í≤®Ïö∏ ÏΩîÌä∏", "Î†àÎçî/ÎùºÏù¥ÎçîÏä§ Ïû¨ÌÇ∑","Î¨¥Ïä§ÌÉï/Ìçº","Î°±Ìå®Îî©/Î°±Ìó§ÎπÑ ÏïÑÏö∞ÌÑ∞","ÏäàÌä∏/Î∏îÎ†àÏù¥Ï†Ä Ïû¨ÌÇ∑","ÏàèÌå®Îî©/ÏàèÌó§ÎπÑ ÏïÑÏö∞ÌÑ∞","Ïπ¥ÎîîÍ±¥","ÏïÑÎÖ∏ÎùΩ Ïû¨ÌÇ∑","Ìå®Îî© Î≤†Ïä§Ìä∏","ÌîåÎ¶¨Ïä§/ÎΩÄÍ∏ÄÏù¥","Ìä∏Î†àÏù¥Îãù Ïû¨ÌÇ∑","Í∏∞ÌÉÄ ÏïÑÏö∞ÌÑ∞"],
            "Í∞ÄÎ∞©" : ["=== Î∂ÑÎ•ò 2 ===","Î∞±Ìå©","Î©îÏã†Ï†Ä/ÌÅ¨Î°úÏä§ Î∞±","ÌååÏö∞Ïπò Î∞±","ÏàÑÎçîÎ∞±","ÏóêÏΩîÎ∞±","ÌÜ†Ìä∏Î∞±","ÌÅ¥Î°úÏπò Î∞±","Ïõ®Ïù¥Ïä§Ìä∏Î∞±/ÌûôÏÉâ"],
            "ÏïÖÏÑ∏ÏÑúÎ¶¨" : ["=== Î∂ÑÎ•ò 2 ===","Î™®Ïûê","Î†àÍ∑∏Ïõ®Ïñ¥","Î®∏ÌîåÎü¨","Ïû•Í∞ë","ÏãúÍ≥Ñ","ÌåîÏ∞å","Í∑ÄÍ±∏Ïù¥","Î∞òÏßÄ","Î∞úÏ∞å","Î™©Í±∏Ïù¥","Ìó§Ïñ¥ Ïï°ÏÑ∏ÏÑúÎ¶¨"],
            "Ïã†Î∞ú" : ["=== Î∂ÑÎ•ò 2 ===","Íµ¨Îëê","ÏÉåÎì§","Î°úÌçº","Ìûê/ÌéåÌîÑÏä§","ÌîåÎû´ ÏäàÏ¶à","Î∂ÄÏ∏†","Ï∫îÎ≤ÑÏä§/Îã®Ìôî","Ïä§Ìè¨Ï∏† Ïä§ÎãàÏª§Ï¶à"],
        }

        var selectItem = $("#type1").val();
        
        $('#type2').empty();
        for(var count = 0; count < mainCategory[selectItem].length; count++){                
                        var option = $("<option>"+mainCategory[selectItem][count]+"</option>");
                        $('#type2').append(option);
                    }
        
    }

    

    function getTag(){ //Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨ + ÏóîÌÑ∞ ÎàÑÎ•¥Î©¥ tag labelÏóê Ï∂îÍ∞ÄÏãúÌÇ§Îäî ÏΩîÎìú
        var valuelist = "{{clothesobject.tag}}";
        //var valuelist = $('#tags').val();
        var tagarea = document.getElementsByClassName("tag_area")[0];
        var reg = /[\s\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi;
        var val = '';
        val = valuelist.split(',');
    
        if (!(valuelist === '' || valuelist === null || valuelist === false)) {
            //Î≤ÑÌäº ÏÇΩÏûÖ
            for (var i=0; i<val.length;i++){

                const btnElement = document.createElement('button');
                btnElement.type = "button";
                btnElement.classList.add("tag_btn");
                btnElement.innerHTML = '<span class="tag_text">' + val[i] + '</span><i class="fa-sharp fa-solid fa-xmark tag_delete"></i>';
                tagarea.appendChild(btnElement);
        
                const cnt_tag = document.getElementsByClassName("tag_delete").length -1
                document.getElementsByClassName("tag_delete")[cnt_tag].addEventListener("click", deleteTag);
                
                // ÎîîÏûêÏù∏
                document.getElementsByClassName('tag_btn')[cnt_tag].style.borderRadius = '30px';
                document.getElementsByClassName('tag_btn')[cnt_tag].style.border = '1px solid gray';
                document.getElementsByClassName('tag_btn')[cnt_tag].style.marginRight = '15px';
                document.getElementsByClassName('tag_btn')[cnt_tag].style.marginTop = '10px';
                document.getElementsByClassName('tag_btn')[cnt_tag].style.padding = '10px';
                document.getElementsByClassName('tag_delete')[cnt_tag].style.marginLeft = '10px';
            }
            
        }else{
        }
    }

    function addTag(){ //Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨ + ÏóîÌÑ∞ ÎàÑÎ•¥Î©¥ tag labelÏóê Ï∂îÍ∞ÄÏãúÌÇ§Îäî ÏΩîÎìú
        var value = $('#tag').val();
        var valuelist = $('#tags').val();
        var tagarea = document.getElementsByClassName("tag_area")[0];
        var reg = /[\s\{\}\[\]\/?.,;:|\)*~`!^\-_+<>@\#$%&\\\=\(\'\"]/gi;
        var tagvalue = value.replace(reg, "");
    
        if (value===''|| value==null || value ==false){
            alert("Ï∂îÍ∞ÄÌï† tagÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.");
        }else{
            if (valuelist==''){
                $('#tags').val('#' + tagvalue); // value ÏÇΩÏûÖÌïòÎäî ÏΩîÎìú
            }
            else{
                $('#tags').val(valuelist+', #'+tagvalue); // value ÏÇΩÏûÖÌïòÎäî ÏΩîÎìú
            }
            //Î≤ÑÌäº ÏÇΩÏûÖ
            const btnElement = document.createElement('button');
            btnElement.type = "button";
            btnElement.classList.add("tag_btn");
            btnElement.innerHTML = '<span class="tag_text">#' + tagvalue + '</span><i class="fa-sharp fa-solid fa-xmark tag_delete"></i>';
            tagarea.appendChild(btnElement);
    
            const cnt_tag = document.getElementsByClassName("tag_delete").length -1
            document.getElementsByClassName("tag_delete")[cnt_tag].addEventListener("click", deleteTag);
            
            // ÎîîÏûêÏù∏
            document.getElementsByClassName('tag_btn')[cnt_tag].style.borderRadius = '30px';
            document.getElementsByClassName('tag_btn')[cnt_tag].style.border = '1px solid gray';
            document.getElementsByClassName('tag_btn')[cnt_tag].style.marginRight = '15px';
            document.getElementsByClassName('tag_btn')[cnt_tag].style.marginTop = '10px';
            document.getElementsByClassName('tag_btn')[cnt_tag].style.padding = '10px';
            document.getElementsByClassName('tag_delete')[cnt_tag].style.marginLeft = '10px';
            
        $('#tag').val('');
        }
    }

    function deleteTag(){
        var tags_list = document.getElementById('tags').value.split(",");
        var delete_tag = this.previousSibling.textContent;
        var delete_num = tags_list.indexOf(delete_tag)
        
        tags_list = tags_list.splice(delete_num-1,1)

        document.getElementById('tags').value = tags_list.join(',');
        this.parentNode.remove();
    
    }

    window.onload=function(){
        getType();
        getTag();
        

        document.getElementById("type1").addEventListener("change", subChange);
        document.getElementById("btn_addtag").addEventListener("click", addTag);
    }
</script>

{% endblock jsv%}
