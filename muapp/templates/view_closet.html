{% extends 'base.html' %}
{% load static %}
{% block nav %}
    <a href="{% url 'index' %}" class="nav-item nav-link jamsil">Home</a>
    <a href="{% url 'about' %}" class="nav-item nav-link jamsil">소개</a>
{% endblock %}
{% block closet %}
    <a href="#" class="nav-link dropdown-toggle active jamsil" data-bs-toggle="dropdown">Clothes</a>
{% endblock closet %}

{% block content %}
    <!-- Page Header Start -->
    <div class="container-xxl py-5">
        <!-- Page Header Start -->
        <div class="container">
            <div class="col-lg-6">
                <div class="section-header text-start mb-5 wow fadeInUp" style="bottom: 50px;top: 100px;" data-wow-delay="0.1s">
                    <h1 class="display-5 mb-3 jamsil" style="font-size: 4vw">내 옷장</h1>
                    <p class="jamsil">내 옷들을 등록하고 한 눈에 관리하세요!</p>
                 </div>
            </div>
        </div>
    </div>
    <!-- Page Header End -->


    <!-- Product Start -->
    <div class="container-xxl py-5">
        <div class="container">
            <div class="row g-0 gx-5 align-items-end">
                <div class="col-lg-6">
                </div>
                <div class="col-lg-6 text-start text-lg-end wow slideInRight" data-wow-delay="0.1s">
                    <ul class="nav nav-pills d-inline-flex justify-content-end mb-5">
                        <li class="nav-item me-2">
                            <a class="btn btn-outline-primary border-2" data-bs-toggle="pill" href="#tab-1">상의</a>
                            <div class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle text-body" data-bs-toggle="dropdown"></a>
                                <div class="dropdown-menu m-0">
                                    <a href="#tab-1" class="dropdown-item">니트/스웨터</a>
                                    <a href="#tab-1" class="dropdown-item">셔츠/블라우스</a>
                                    <a href="#tab-1" class="dropdown-item">후드 티셔츠</a>
                                    <a href="#tab-1" class="dropdown-item">피케/카라 티셔츠</a>
                                    <a href="#tab-1" class="dropdown-item">맨투맨/스웨트셔츠</a>
                                    <a href="#tab-1" class="dropdown-item">반소매 티셔츠</a>
                                    <a href="#tab-1" class="dropdown-item">긴소매 티셔츠</a>
                                    <a href="#tab-1" class="dropdown-item">민소매 티셔츠</a>
                                    <a href="#tab-1" class="dropdown-item">기타 상의</a>
                                </div>
                            </div>
                        </li>
                        <li class="nav-item me-2">
                            <a class="btn btn-outline-primary border-2" data-bs-toggle="pill" href="#tab-2">하의</a>
                            <div class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle text-body" data-bs-toggle="dropdown"></a>
                                <div class="dropdown-menu m-0">
                                    <a href="#tab-2" class="dropdown-item">데님 팬츠</a>
                                    <a href="#tab-2" class="dropdown-item">숏 팬츠</a>
                                    <a href="#tab-2" class="dropdown-item">코튼 팬츠</a>
                                    <a href="#tab-2" class="dropdown-item">레깅스</a>
                                    <a href="#tab-2" class="dropdown-item">슈트 팬츠/슬랙스</a>
                                    <a href="#tab-2" class="dropdown-item">점프 슈트/오버올</a>
                                    <a href="#tab-2" class="dropdown-item">트레이닝/조거 팬츠</a>
                                    <a href="#tab-2" class="dropdown-item">기타 바지</a>
                                </div>
                            </div>
                        </li>
                        <li class="nav-item me-0">
                            <a class="btn btn-outline-primary border-2" data-bs-toggle="pill" href="#tab-3">치마</a>
                            <div class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle text-body" data-bs-toggle="dropdown"></a>
                                <div class="dropdown-menu m-0">
                                    <a href="#tab-3" class="dropdown-item">미니 스커트</a>
                                    <a href="#tab-3" class="dropdown-item">미디 스커트</a>
                                    <a href="#tab-3" class="dropdown-item">롱 스커트</a>
                                </div>
                            </div>
                        </li>
                        <li class="nav-item me-2">
                            <a class="btn btn-outline-primary border-2" data-bs-toggle="pill" href="#tab-4">원피스</a>
                            <div class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle text-body" data-bs-toggle="dropdown"></a>
                                <div class="dropdown-menu m-0">
                                    <a href="#tab-4" class="dropdown-item">미니 원피스</a>
                                    <a href="#tab-4" class="dropdown-item">미디 원피스</a>
                                    <a href="#tab-4" class="dropdown-item">맥시 원피스</a>
                                </div>
                            </div>
                        </li>
                        <li class="nav-item me-2">
                            <a class="btn btn-outline-primary border-2" data-bs-toggle="pill" href="#tab-5">아우터</a>
                            <div class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle text-body" data-bs-toggle="dropdown"></a>
                                <div class="dropdown-menu m-0">
                                    <a href="#tab-5" class="dropdown-item">후드 집업</a>
                                    <a href="#tab-5" class="dropdown-item">환절기 코트</a>
                                    <a href="#tab-5" class="dropdown-item">블루종/MA-1</a>
                                    <a href="#tab-5" class="dropdown-item">겨울 코트</a>
                                    <a href="#tab-5" class="dropdown-item">레더/라이더스 재킷</a>
                                    <a href="#tab-5" class="dropdown-item">롱패딩/롱헤비 아우터</a>
                                    <a href="#tab-5" class="dropdown-item">슈트/블레이저 재킷</a>
                                    <a href="#tab-5" class="dropdown-item">숏패딩/숏헤비 아우터</a>
                                    <a href="#tab-5" class="dropdown-item">카디건</a>
                                    <a href="#tab-5" class="dropdown-item">아노락 재킷</a>
                                    <a href="#tab-5" class="dropdown-item">패딩 베스트</a>
                                    <a href="#tab-5" class="dropdown-item">플리스/뽀글이</a>
                                    <a href="#tab-5" class="dropdown-item">트레이닝 재킷</a>
                                    <a href="#tab-5" class="dropdown-item">기타 아우터</a>
                                </div>
                            </div>
                        </li>
                        <li class="nav-item me-2">
                            <a class="btn btn-outline-primary border-2" data-bs-toggle="pill" href="#tab-1">가방</a>
                            <div class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle text-body" data-bs-toggle="dropdown"></a>
                                <div class="dropdown-menu m-0">
                                    <a href="#tab-1" class="dropdown-item">백팩</a>
                                    <a href="#tab-1" class="dropdown-item">메신저/크로스 백</a>
                                    <a href="#tab-1" class="dropdown-item">파우치 백</a>
                                    <a href="#tab-1" class="dropdown-item">숄더백</a>
                                    <a href="#tab-1" class="dropdown-item">에코백</a>
                                    <a href="#tab-1" class="dropdown-item">토트백</a>
                                    <a href="#tab-1" class="dropdown-item">클로치 백</a>
                                    <a href="#tab-1" class="dropdown-item">웨이스트백/힙색</a>
                                </div>
                            </div>
                        </li>
                        <li class="nav-item me-2">
                            <a class="btn btn-outline-primary border-2" data-bs-toggle="pill" href="#tab-1">악세서리</a>
                            <div class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle text-body" data-bs-toggle="dropdown"></a>
                                <div class="dropdown-menu m-0">
                                    <a href="#tab-1" class="dropdown-item">모자</a>
                                    <a href="#tab-1" class="dropdown-item">레그웨어</a>
                                    <a href="#tab-1" class="dropdown-item">머플러</a>
                                    <a href="#tab-1" class="dropdown-item">장갑</a>
                                    <a href="#tab-1" class="dropdown-item">시계</a>
                                    <a href="#tab-1" class="dropdown-item">팔찌</a>
                                    <a href="#tab-1" class="dropdown-item">귀걸이</a>
                                    <a href="#tab-1" class="dropdown-item">반지</a>
                                    <a href="#tab-1" class="dropdown-item">발찌</a>
                                    <a href="#tab-1" class="dropdown-item">목걸이</a>
                                    <a href="#tab-1" class="dropdown-item">헤어 액세서리</a>
                                </div>
                            </div>
                        </li>
                        <li class="nav-item me-2">
                            <a class="btn btn-outline-primary border-2" data-bs-toggle="pill" href="#tab-1">신발</a>
                            <div class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle text-body" data-bs-toggle="dropdown"></a>
                                <div class="dropdown-menu m-0">
                                    <ul>
                                        <li>
                                            <label for='shoes1'><span>구두</span></label>
                                            <input type="checkbox" id="shoes1" class=""></input>
                                        </li>

                                    </ul>
                                    <a href="#tab-1" class="dropdown-item">구두</a>
                                    <a href="#tab-1" class="dropdown-item">샌들</a>
                                    <a href="#tab-1" class="dropdown-item">로퍼</a>
                                    <a href="#tab-1" class="dropdown-item">힐/펌프스</a>
                                    <a href="#tab-1" class="dropdown-item">플랫 슈즈</a>
                                    <a href="#tab-1" class="dropdown-item">부츠</a>
                                    <a href="#tab-1" class="dropdown-item">캔버스/단화</a>
                                    <a href="#tab-1" class="dropdown-item">스포츠 스니커즈</a>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="tab-content">
                <div id="tab-1" class="tab-pane fade show p-0 active">
                    <div class="row g-4">
                        {% for c in clothesobject %}
                            {% if c.uploadUser_id == user.id%}
                            {% if c.imgfile %}
                                <div class="col-xl-3 col-lg-4 col-md-6">
                                    <div class="product-item">
                                        <div class="position-relative bg-light overflow-hidden">
                                            <img class="img-fluid w-100" src="{{c.imgfile.url}}" width="200px" height="300px" margin="10%" padding="10%" alt="{{ c.imgfile }}">
                                        </div>
                                        <div class="text-center p-4">
                                            <a class="d-block p mb-2" href="">{{c.name}}</a>
                                        </div>
                                        <hr width="80%" align="center">
                                        <div class="text-end p-4">
                                            <a class="d-block p mb-2 text-black-50" href="" style="">{{c.type1}}-{{c.type2}}</a>
                                        </div>
                                    </div>      
                                </div>
                            {% endif%}
                            {% endif%}
                        {% endfor %}
                    </div>
                </div>
                
                <div id="tab-2" class="tab-pane fade show p-0">
                    <div class="row g-4">
                        <!-- <item 1개 시작>-->
                        <div class="col-xl-3 col-lg-4 col-md-6">
                            <div class="product-item">
                                <div class="position-relative bg-light overflow-hidden">
                                    <img class="img-fluid w-100" src="{% static 'img/product-2.jpg' %}" alt="">
                                    
                                </div>
                                <div class="text-center p-4">
                                    <a class="d-block p mb-2" href="">Fresh Tomato</a>
                                    
                                </div>
                            </div>
                        </div>
                        <!-- <item 1개 끝>-->
                        <div class="col-12 text-center">
                            <a class="btn btn-primary rounded-pill py-3 px-5" href="">Browse More Products</a>
                        </div>
                    </div>
                </div>
                <!-- Tab 3 -->
                <div id="tab-3" class="tab-pane fade show p-0">
                    <div class="row g-4">
                        <div class="col-xl-3 col-lg-4 col-md-6">
                            <div class="product-item">
                                <div class="position-relative bg-light overflow-hidden">
                                    <img class="img-fluid w-100" src="{% static 'img/product-4.jpg' %}" alt="">
                                    <div class="bg-primary rounded text-white position-absolute start-0 top-0 m-4 py-1 px-3">New</div>
                                </div>
                                <div class="text-center p-4">
                                    <a class="d-block p mb-2 text-primary" href="">Fresh Tomato</a>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 text-center">
                            <a class="btn btn-primary rounded-pill py-3 px-5" href="">Browse More Products</a>
                        </div>
                    </div>
                </div>
                <div class="btn-container" name="btn-container">
                    <button class="btn-submit" type="button" onclick = "location.href = '{% url 'uploadCloset' user.first_name %}' " onkeyup="if(window.event.keyCode==13){}">
                        <p id="btnText">Upload</p>
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- Product End -->
{% endblock content %}

{% block jsv %}
<script>
    ( /* att_zone : 이미지들이 들어갈 위치 id, btn : file tag id */
      imageView = function imageView(att_zone, btn){
    
        var attZone = document.getElementById(att_zone);
        var btnAtt = document.getElementById(btn)
        var sel_files = [];
        
        // 이미지와 체크 박스를 감싸고 있는 div 속성
        var div_style = 'display:block;position:relative;'
                      + 'margin:5px;border:1px solid #fff;z-index:1';
        // 미리보기 이미지 속성
        var img_style = 'width:30%;height:auto;z-index:none;visibilty:visible;animation-delay:0.1s;animation-name:fadeInup;vertical-align: middle;'
        // 이미지안에 표시되는 체크박스의 속성
        var chk_style = 'width:30px;height:30px;position:absolute;font-size:24px;'
                      + 'bottom:0px;z-index:999;background-color:white;color:#f00';
           
    
        
        /*첨부된 이미지들을 배열에 넣고 미리보기 */
        imageLoader = function(file){
          sel_files.push(file);
          var reader = new FileReader();
          reader.onload = function(ee){
            let img = document.createElement('img')
            img.setAttribute('style', img_style)
            img.src = ee.target.result;
            attZone.appendChild(makeDiv(img, file));
          }
          
          reader.readAsDataURL(file);
        }
        
        /*첨부된 파일이 있는 경우 checkbox와 함께 attZone에 추가할 div를 만들어 반환 */
        makeDiv = function(img, file){
          var div = document.createElement('div')
          div.setAttribute('style', div_style)
          
          var btn = document.createElement('input')
          btn.setAttribute('type', 'button')
          btn.setAttribute('value', 'x')
          btn.setAttribute('delFile', file.name);
          btn.setAttribute('style', chk_style);
          btn.onclick = function(ev){
            var ele = ev.srcElement;
            var delFile = ele.getAttribute('delFile');
            for(var i=0 ;i<sel_files.length; i++){
              if(delFile== sel_files[i].name){
                sel_files.splice(i, 1);      
              }
            }
            
            dt = new DataTransfer();
            for(f in sel_files) {
              var file = sel_files[f];
              dt.items.add(file);
            }
            btnAtt.files = dt.files;
            var p = ele.parentNode;
            attZone.removeChild(p)
          }
          div.appendChild(img)
          div.appendChild(btn)
          return div
        }
      }
    )('att_zone', 'btnAtt')
</script>
{% endblock jsv %}